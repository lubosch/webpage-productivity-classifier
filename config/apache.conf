<VirtualHost vnenk.com:80>
  ServerName www.vnenk.com
  ServerAlias vnenk.com *.vnenk.com
  #ServerName crisp-code.com
  ServerAdmin webmaster@localhost
  DocumentRoot /opt/stay_productive/current
  # Redirect all requests that don't match a file on disk under DocumentRoot get proxied to Puma
  <Proxy *>
        Order allow,deny
        Allow from all
  </Proxy>

#  ProxyPass / http://127.0.0.1:3001/
#  ProxyPassReverse / http://127.0.0.1:3001/

  ProxyPass / http://147.175.149.242:3002/
  ProxyPassReverse / http://147.175.149.242:3002/

  LogLevel warn
  CustomLog ${APACHE_LOG_DIR}/stay_productive.access.log combined
  ErrorLog ${APACHE_LOG_DIR}/stay_productive.error.log


  # Anything under public is open to the world
  <Directory /opt/stay_productive/current/public>
    Satisfy any
    Allow from all
    Require all granted
    Options -MultiViews
  </Directory>
  # Disable ETags (https://github.com/h5bp/server-configs-apache/tree/master/doc#configure-etags)
  # Set Expiration date for all assets to one year in the future
  <Location ^/assets/.*$>
    # Use of ETag is discouraged when Last-Modified is present
    Header unset ETag
    FileETag None
    # RFC says only cache for 1 year
    ExpiresActive On
    ExpiresDefault "access plus 1 year"
  </Location>

  # Compress HTML on the fly
  AddOutputFilterByType DEFLATE text/html
</VirtualHost>

